#!/bin/bash

# Script para criar um arquivo ZIP limpo do projeto SeuCodigo
echo "üì¶ Criando arquivo de download do projeto SeuCodigo..."

# Criar diret√≥rio tempor√°rio
mkdir -p /tmp/seucodigo-download

# Copiar arquivos essenciais
echo "üìÅ Copiando arquivos essenciais..."

# Estrutura principal
cp -r client /tmp/seucodigo-download/
cp -r server /tmp/seucodigo-download/
cp -r shared /tmp/seucodigo-download/

# Arquivos de configura√ß√£o
cp package.json /tmp/seucodigo-download/
cp package-lock.json /tmp/seucodigo-download/
cp tsconfig.json /tmp/seucodigo-download/
cp vite.config.ts /tmp/seucodigo-download/
cp tailwind.config.ts /tmp/seucodigo-download/
cp postcss.config.js /tmp/seucodigo-download/
cp drizzle.config.ts /tmp/seucodigo-download/
cp components.json /tmp/seucodigo-download/

# Documenta√ß√£o
cp README.md /tmp/seucodigo-download/
cp replit.md /tmp/seucodigo-download/
cp MIGRATION_GUIDE.md /tmp/seucodigo-download/
cp .gitignore /tmp/seucodigo-download/
cp .dockerignore /tmp/seucodigo-download/
cp package-info.json /tmp/seucodigo-download/

# Criar arquivo TAR.GZ
cd /tmp
echo "üóúÔ∏è Compactando arquivos..."
tar -czf seucodigo-portfolio.tar.gz --exclude="*.log" --exclude="*.tmp" --exclude=".DS_Store" seucodigo-download/

# Mover para diret√≥rio do projeto
mv seucodigo-portfolio.tar.gz /home/runner/workspace/

# Limpar tempor√°rios
rm -rf /tmp/seucodigo-download

echo "‚úÖ Arquivo criado: seucodigo-portfolio.tar.gz"
echo "üìä Tamanho do arquivo:"
ls -lh /home/runner/workspace/seucodigo-portfolio.tar.gz
echo ""
echo "üéâ Projeto pronto para download!"
echo ""
echo "üìã Conte√∫do do arquivo:"
echo "- C√≥digo fonte completo (frontend + backend)"
echo "- Configura√ß√µes de build e deploy"
echo "- Documenta√ß√£o completa"
echo "- Schema do banco de dados"
echo "- Scripts de migra√ß√£o"
echo ""
echo "üöÄ Para usar o projeto:"
echo "1. Extrair o arquivo: tar -xzf seucodigo-portfolio.tar.gz"
echo "2. npm install"
echo "3. Configurar DATABASE_URL"
echo "4. npm run db:push"
echo "5. npm run dev"